# Changelog

## [3.1.1] - 2025-08-22

### Fixed

- **Window Management**:
  - Fixed progress bar handling during save/quit operations
  - Added close signal tracking to prevent duplicate save attempts
- **Presentation Layout**:
  - Corrected presentation view aspect ratio calculation (16:9) (fixes #53)
  - Fixed text layer positioning to use relative coordinates (fixes #53)
- **File Handling**:
  - Fixed video file format extraction in Slide class
  - Improved ZIP file error handling with better error messages
- **Menu Cleanup**:
  - Removed slideshow menu section

### Technical Details

- Added source maps for improved debugging
- Integrated Sentry webpack plugin configuration for both main and renderer processes
- Improved code formatting and consistency across multiple files

## [3.1.0] - 2025-08-20

### Added

- **Error Monitoring**:
  - Integrated Sentry in both `main` and `renderer` processes
  - Configured renderer to send default PII and custom tags

### Fixed

- **App Stability**:
  - Guarded against undefined `currentProject` during save and close operations
  - Updated window close handling to prevent errors when no project is open
- **File Handling**:
  - Improved video file picker with null-safety checks
  - Fixed video filename parsing logic to correctly strip extensions
  - Enhanced media responder to return `404 Not Found` for missing files
- **UX Improvements**:
  - Changed file save dialog message from `"File Is Saving"` â†’ `"File Saved"`

### Technical Details

- Removed unnecessary debug logging (`console.log`, `drain`, `data`, `fileCreator` outputs)
- Simplified video filename handling logic in `Slide.ts`
- Added safer stream handling in `MediaResponderClass`

## [3.0.1] - 2025-08-14

### Fixed

- **Font Handling**:
  - Replaced child process font detection with direct `font-list` package integration
  - Improved font listing reliability

### Technical Details

- Removed child process fork for font detection
- Simplified package.json by removing redundant extraResources declaration
- Updated resource path resolution logic

## [3.0.0] - 2025-08-13

### Major Changes

#### Added

- **TypeScript Integration**:
  - Converted some core classes (Slide, WorkingFile) to TypeScript for better type safety
  - Added TypeScript configuration for future project-wide adoption
- **Enhanced Text Customization**:
  - Font selection from system fonts (fixes #40)
  - Text positioning controls
  - Toggleable text background
- **Video Controls**:
  - Mute/unmute functionality for videos
  - Improved video handling with black video fallback
- **Project Management**:
  - New TAR-based project format replacing ZIP (fixes 2GB size limit)
  - Direct archive reading capability (fixes #32)

#### Changed

- **UI Improvements**:
  - Redesigned slide creator interface
  - Better slide thumbnail management
  - Improved sidebar navigation
- **Architectural Updates**:
  - Refactored monolithic SlideCreator into modular components following SOLID principles
  - Implemented new MediaResponder class for better media handling
- **Performance**:
  - Optimized video streaming and resource loading
  - Reduced memory usage for large projects

#### Fixed

- **Critical Issues**:
  - Resolved 2GB project size limitation
  - Fixed archive access problems
- **Stability**:
  - Improved error handling during project save/load
  - Better resource cleanup when closing projects
- **UX**:
  - Smoother transitions between slides
  - More reliable file operations

### Technical Details

#### New Features

- Added font selector with system font detection
- Implemented text positioning with drag-and-drop
- Created new video toolbar with mute control
- Added project save confirmation before quit

#### Code Improvements

- TypeScript migration for core components
- Modular architecture with separate classes for:
  - Canvas rendering
  - Sidebar management
  - Text editing
  - Video controls
- Improved error handling and logging

#### Dependency Updates

- Updated Electron to latest stable version
- Replaced JSZip with TAR for archive handling
- Added new dev dependencies for TypeScript support
